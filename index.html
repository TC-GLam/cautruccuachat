<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i Gi·∫£ng T∆∞∆°ng T√°c: C·∫•u Tr√∫c C·ªßa Ch·∫•t - Th·∫ßy L√¢m</title>
    
    <!-- T√≠ch h·ª£p Tailwind CSS t·ª´ CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- T√≠ch h·ª£p font Inter t·ª´ Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- CSS t√πy ch·ªânh cho hi·ªáu ·ª©ng v√† giao di·ªán -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8; /* M√†u n·ªÅn x√°m nh·∫°t */
        }

        /* Hi·ªáu ·ª©ng chuy·ªÉn ƒë·ªông m∆∞·ª£t m√† cho c√°c tab content */
        .tab-content {
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            transform: translateY(10px);
            opacity: 0;
            display: none; /* M·∫∑c ƒë·ªãnh ·∫©n ƒëi */
        }

        .tab-content.active {
            opacity: 1;
            transform: translateY(0);
            display: block; /* Hi·ªán ra khi active */
        }

        /* Ki·ªÉu cho n√∫t tab ƒëang active */
        .tab-button.active {
            background-image: linear-gradient(to right, #4facfe 0%, #00f2fe 100%);
            color: white;
            box-shadow: 0 4px 15px rgba(79, 172, 254, 0.4);
        }

        /* Ki·ªÉu cho icon loading */
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #4facfe;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="antialiased">

    <div class="container mx-auto p-4 md:p-8">
        <!-- Ph·∫ßn ti√™u ƒë·ªÅ -->
        <header class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-sky-500 to-indigo-600">
                Kh√°m Ph√° C·∫•u Tr√∫c C·ªßa Ch·∫•t
            </h1>
            <p class="mt-2 text-lg text-gray-600">C√πng Th·∫ßy L√¢m vui h·ªçc V·∫≠t L√Ω nh√©!</p>
        </header>

        <!-- Ph·∫ßn ƒëi·ªÅu h∆∞·ªõng c√°c tab -->
        <nav class="flex flex-wrap justify-center gap-2 md:gap-4 mb-8">
            <button data-tab="1" class="tab-button active px-4 py-2 md:px-6 md:py-3 font-semibold text-gray-700 bg-white rounded-full shadow-md hover:bg-gray-100 transition-all duration-300">
                C√°c Th·ªÉ C·ªßa Ch·∫•t
            </button>
            <button data-tab="2" class="tab-button px-4 py-2 md:px-6 md:py-3 font-semibold text-gray-700 bg-white rounded-full shadow-md hover:bg-gray-100 transition-all duration-300">
                N√≥ng Ch·∫£y & ƒê√¥ng ƒê·∫∑c
            </button>
            <button data-tab="3" class="tab-button px-4 py-2 md:px-6 md:py-3 font-semibold text-gray-700 bg-white rounded-full shadow-md hover:bg-gray-100 transition-all duration-300">
                H√≥a H∆°i & Ng∆∞ng T·ª•
            </button>
        </nav>

        <!-- N·ªôi dung c√°c tab -->
        <main>
            <!-- Tab 1: C√°c Th·ªÉ c·ªßa Ch·∫•t (R·∫Øn, L·ªèng, Kh√≠) -->
            <div id="tab-content-1" class="tab-content active">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- C·ªôt tr√°i: Gi·∫£i th√≠ch v√† M√¥ ph·ªèng -->
                    <div class="bg-white p-6 rounded-2xl shadow-lg">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">Th·∫ßy gi·∫£ng b√†i: C√°c th·ªÉ c·ªßa ch·∫•t</h2>
                        <div class="text-gray-700 space-y-3 leading-relaxed">
                            <p>Ch√†o c√°c em! C·ª© t∆∞·ªüng t∆∞·ª£ng c√°c ph√¢n t·ª≠ v·∫≠t ch·∫•t gi·ªëng nh∆∞ m·∫•y ƒë·ª©a h·ªçc sinh trong l·ªõp ch√∫ng ta v·∫≠y ƒë√≥.</p>
                            
                            <!-- *** N·ªòI DUNG M·ªöI ƒê∆Ø·ª¢C TH√äM V√ÄO ƒê√ÇY *** -->
                            <p class="p-4 bg-sky-50 border-l-4 border-sky-400 rounded-r-lg">√Ä m√† c√°c em bi·∫øt kh√¥ng, gi·ªØa c√°c b·∫°n ph√¢n t·ª≠ n√†y lu√¥n c√≥ "t√¨nh c·∫£m" v·ªõi nhau ƒë·∫•y. L√∫c ·ªü xa th√¨ ch√∫ng "nh·ªõ nhung" v√† h√∫t nhau l·∫°i g·∫ßn. Nh∆∞ng khi b·ªã √©p l·∫°i qu√° g·∫ßn th√¨ ch√∫ng l·∫°i "kh√≥ ch·ªãu" v√† ƒë·∫©y nhau ra. Th·∫ßy tr√≤ m√¨nh g·ªçi ƒë√≥ l√† <strong>l·ª±c t∆∞∆°ng t√°c ph√¢n t·ª≠</strong> nh√©!</p>
                            
                            <p><strong>üßä Th·ªÉ r·∫Øn:</strong> Nh·ªù l·ª±c h√∫t n√†y, c√°c ph√¢n t·ª≠ ·ªü th·ªÉ r·∫Øn li√™n k·∫øt r·∫•t ch·∫∑t ch·∫Ω. Gi·ªëng nh∆∞ l√∫c c·∫£ l·ªõp ƒëang ng·ªìi trong gi·ªù ki·ªÉm tra, b·∫°n n√†o c≈©ng ng·ªìi im ngay ng·∫Øn t·∫°i ch·ªó c·ªßa m√¨nh, ch·ªâ h∆°i c·ª±a qu·∫≠y m·ªôt ch√∫t th√¥i.</p>
                            <p><strong>üíß Th·ªÉ l·ªèng:</strong> ·ªû ƒë√¢y l·ª±c h√∫t y·∫øu h∆°n. T∆∞·ªüng t∆∞·ª£ng ƒë√¢y l√† gi·ªù ra ch∆°i! C√°c b·∫°n c√≥ th·ªÉ ƒëi l·∫°i, tr∆∞·ª£t qua nhau trong s√¢n tr∆∞·ªùng, nh∆∞ng kh√¥ng ch·∫°y ra ngo√†i ƒë∆∞·ª£c. C√°c ph√¢n t·ª≠ l·ªèng c√≥ th·ªÉ di chuy·ªÉn nh∆∞ng v·∫´n b·ªã gi·ªØ l·∫°i v·ªõi nhau.</p>
                             <p><strong>üí® Th·ªÉ kh√≠:</strong> L·ª±c t∆∞∆°ng t√°c ·ªü ƒë√¢y si√™u y·∫øu. ƒê√¢y ch√≠nh l√† l√∫c tan h·ªçc! M·ªói b·∫°n ch·∫°y m·ªôt h∆∞·ªõng, tung tƒÉng kh·∫Øp n∆°i. C√°c ph√¢n t·ª≠ kh√≠ th√¨ chuy·ªÉn ƒë·ªông h·ªón lo·∫°n, t·ª± do v√† chi·∫øm to√†n b·ªô kh√¥ng gian c√≥ th·ªÉ.</p>
                        </div>
                        
                        <!-- B·∫£ng so s√°nh chi ti·∫øt ƒë∆∞·ª£c th√™m v√†o -->
                        <div class="mt-8 overflow-x-auto">
                            <h3 class="text-xl font-bold text-gray-800 mb-4">B·∫£ng so s√°nh cho d·ªÖ h√¨nh dung n√®</h3>
                            <div class="rounded-lg border border-gray-200 shadow-sm">
                                <table class="w-full text-sm text-left text-gray-600">
                                    <thead class="bg-gray-50 text-xs text-gray-700 uppercase">
                                        <tr>
                                            <th scope="col" class="px-4 py-3 font-bold">C·∫•u tr√∫c</th>
                                            <th scope="col" class="px-4 py-3 font-bold text-sky-600">Th·ªÉ r·∫Øn</th>
                                            <th scope="col" class="px-4 py-3 font-bold text-teal-600">Th·ªÉ l·ªèng</th>
                                            <th scope="col" class="px-4 py-3 font-bold text-amber-600">Th·ªÉ kh√≠</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr class="bg-white border-b">
                                            <th scope="row" class="px-4 py-3 font-medium text-gray-900 whitespace-nowrap">Kho·∫£ng c√°ch ph√¢n t·ª≠</th>
                                            <td class="px-4 py-3">R·∫•t g·∫ßn nhau</td>
                                            <td class="px-4 py-3">C√°ch xa nhau</td>
                                            <td class="px-4 py-3">R·∫•t xa nhau</td>
                                        </tr>
                                        <tr class="bg-gray-50 border-b">
                                            <th scope="row" class="px-4 py-3 font-medium text-gray-900 whitespace-nowrap">S·ª± s·∫Øp x·∫øp</th>
                                            <td class="px-4 py-3">Tr·∫≠t t·ª±</td>
                                            <td class="px-4 py-3">K√©m tr·∫≠t t·ª± h∆°n</td>
                                            <td class="px-4 py-3">Kh√¥ng c√≥ tr·∫≠t t·ª±</td>
                                        </tr>
                                        <tr class="bg-white border-b">
                                            <th scope="row" class="px-4 py-3 font-medium text-gray-900 whitespace-nowrap">Chuy·ªÉn ƒë·ªông</th>
                                            <td class="px-4 py-3">Dao ƒë·ªông quanh v·ªã tr√≠ c·ªë ƒë·ªãnh</td>
                                            <td class="px-4 py-3">Dao ƒë·ªông quanh v·ªã tr√≠ kh√¥ng c·ªë ƒë·ªãnh</td>
                                            <td class="px-4 py-3">Chuy·ªÉn ƒë·ªông h·ªón lo·∫°n</td>
                                        </tr>
                                        <tr class="bg-gray-50 border-b">
                                            <th scope="row" class="px-4 py-3 font-medium text-gray-900 whitespace-nowrap">H√¨nh d·∫°ng</th>
                                            <td class="px-4 py-3">X√°c ƒë·ªãnh</td>
                                            <td class="px-4 py-3">Ph·ª• thu·ªôc b√¨nh ch·ª©a</td>
                                            <td class="px-4 py-3">Ph·ª• thu·ªôc b√¨nh ch·ª©a</td>
                                        </tr>
                                        <tr class="bg-white">
                                            <th scope="row" class="px-4 py-3 font-medium text-gray-900 whitespace-nowrap">Th·ªÉ t√≠ch</th>
                                            <td class="px-4 py-3">X√°c ƒë·ªãnh</td>
                                            <td class="px-4 py-3">X√°c ƒë·ªãnh</td>
                                            <td class="px-4 py-3">Ph·ª• thu·ªôc b√¨nh ch·ª©a</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <div class="mt-8">
                            <h3 class="text-xl font-bold text-gray-800 mb-2">Xem m√¥ ph·ªèng n√®!</h3>
                            <div class="flex justify-center space-x-2 mb-4">
                               <button onclick="setSimulationState('solid')" class="px-3 py-1 bg-sky-200 text-sky-800 rounded-full text-sm font-semibold">R·∫Øn</button>
                               <button onclick="setSimulationState('liquid')" class="px-3 py-1 bg-teal-200 text-teal-800 rounded-full text-sm font-semibold">L·ªèng</button>
                               <button onclick="setSimulationState('gas')" class="px-3 py-1 bg-amber-200 text-amber-800 rounded-full text-sm font-semibold">Kh√≠</button>
                            </div>
                            <svg id="simulation-states" class="w-full h-64 bg-gray-100 rounded-lg border"></svg>
                        </div>
                    </div>
                    <!-- C·ªôt ph·∫£i: G√≥c t∆∞∆°ng t√°c AI -->
                    <div class="bg-gradient-to-br from-sky-50 to-indigo-100 p-6 rounded-2xl shadow-lg">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">G√≥c T∆∞∆°ng T√°c C√πng Th·∫ßy L√¢m</h2>
                        <div class="space-y-6">
                             <div>
                                <button id="ask-example-1" class="w-full bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:shadow-xl transition-all duration-300">
                                    Nh·ªù th·∫ßy cho th√™m v√≠ d·ª•
                                </button>
                            </div>
                            <div>
                                <p class="font-semibold text-gray-700 mb-2">C√≥ g√¨ kh√≥ hi·ªÉu, h·ªèi th·∫ßy ngay!</p>
                                <textarea id="user-question-1" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-blue-500 focus:ring-0 transition" rows="3" placeholder="V√≠ d·ª•: Th∆∞a th·∫ßy, t·∫°i sao n∆∞·ªõc ƒë√° l·∫°i n·ªïi tr√™n m·∫∑t n∆∞·ªõc ·∫°?"></textarea>
                                <button id="send-question-1" class="mt-2 w-full bg-gradient-to-r from-green-400 to-blue-500 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:shadow-xl transition-all duration-300">
                                    G·ª≠i c√¢u h·ªèi
                                </button>
                            </div>
                            <div id="ai-response-1" class="bg-white/80 p-4 rounded-lg min-h-[100px] shadow-inner">
                                <div class="flex items-center justify-center h-full">
                                   <p class="text-gray-500">C√¢u tr·∫£ l·ªùi c·ªßa th·∫ßy s·∫Ω hi·ªán ·ªü ƒë√¢y...</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab 2: S·ª± N√≥ng ch·∫£y & ƒê√¥ng ƒë·∫∑c -->
            <div id="tab-content-2" class="tab-content">
                 <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-2xl shadow-lg">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">Th·∫ßy gi·∫£ng b√†i: N√≥ng ch·∫£y & ƒê√¥ng ƒë·∫∑c</h2>
                        <div class="text-gray-700 space-y-3 leading-relaxed">
                            <p>M·∫•y ƒë·ª©a th·∫•y c·ª•c n∆∞·ªõc ƒë√° ƒë·ªÉ ngo√†i tr·ªùi m·ªôt l√∫c l√† tan th√†nh n∆∞·ªõc kh√¥ng? ƒê√≥ l√† <strong>s·ª± n√≥ng ch·∫£y</strong> ƒë√≥.</p>
                            <p>Khi ta cung c·∫•p nƒÉng l∆∞·ª£ng (ƒëun n√≥ng), c√°c ph√¢n t·ª≠ ƒëang ng·ªìi im ·ªü th·ªÉ r·∫Øn s·∫Ω "qu·∫©y" nhi·ªát t√¨nh h∆°n. Ch√∫ng dao ƒë·ªông m·∫°nh ƒë·∫øn m·ª©c ph√° v·ª° li√™n k·∫øt v√† b·∫Øt ƒë·∫ßu ch·∫°y lung tung, chuy·ªÉn th√†nh th·ªÉ l·ªèng. Qu√° tr√¨nh ng∆∞·ª£c l·∫°i, khi ta l·∫•y b·ªõt nƒÉng l∆∞·ª£ng ƒëi (l√†m l·∫°nh), c√°c ph√¢n t·ª≠ s·∫Ω "ƒëu·ªëi s·ª©c", chuy·ªÉn ƒë·ªông ch·∫≠m l·∫°i v√† x·∫øp ngay ng·∫Øn th√†nh th·ªÉ r·∫Øn, g·ªçi l√† <strong>s·ª± ƒë√¥ng ƒë·∫∑c</strong>. D·ªÖ hi·ªÉu ha!</p>
                        </div>
                        
                        <div class="mt-8">
                             <h3 class="text-2xl font-bold text-gray-800 mb-4">Th·∫ßy n√≥i th√™m: Ch·∫•t r·∫Øn k·∫øt tinh v√† v√¥ ƒë·ªãnh h√¨nh</h3>
                             <p class="text-gray-700 mb-6 leading-relaxed">√Ä, n√≥i v·ªÅ ch·∫•t r·∫Øn th√¨ kh√¥ng ph·∫£i b·∫°n n√†o c≈©ng gi·ªëng nhau ƒë√¢u nh√©. Ch√∫ng ta c√≥ hai "phe" ch√≠nh n√®:</p>
                             <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                 <!-- Ch·∫•t r·∫Øn k·∫øt tinh -->
                                 <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded-r-lg">
                                     <h4 class="font-bold text-blue-800 text-lg">Ch·∫•t r·∫Øn k·∫øt tinh</h4>
                                     <p class="text-sm text-blue-700 mt-1 mb-2">Gi·ªëng nh∆∞ m·ªôt ƒë·ªôi di·ªÖu binh, c√°c ph√¢n t·ª≠ x·∫øp h√†ng ngay ng·∫Øn, c√≥ tr·∫≠t t·ª±.</p>
                                     <ul class="list-disc list-inside text-sm text-blue-900 space-y-1">
                                         <li>C√≥ c·∫•u tr√∫c tinh th·ªÉ.</li>
                                         <li>N√≥ng ch·∫£y ·ªü m·ªôt nhi·ªát ƒë·ªô x√°c ƒë·ªãnh.</li>
                                         <li><strong>V√≠ d·ª•:</strong> Mu·ªëi ƒÉn, kim c∆∞∆°ng, vi√™n n∆∞·ªõc ƒë√°.</li>
                                     </ul>
                                 </div>
                                 <!-- Ch·∫•t r·∫Øn v√¥ ƒë·ªãnh h√¨nh -->
                                 <div class="bg-amber-50 border-l-4 border-amber-500 p-4 rounded-r-lg">
                                     <h4 class="font-bold text-amber-800 text-lg">Ch·∫•t r·∫Øn v√¥ ƒë·ªãnh h√¨nh</h4>
                                     <p class="text-sm text-amber-700 mt-1 mb-2">Gi·ªëng m·ªôt ƒë√°m ƒë√¥ng l·ªôn x·ªôn, c√°c ph√¢n t·ª≠ ƒë·ª©ng kh√¥ng theo h√†ng l·ªëi.</p>
                                     <ul class="list-disc list-inside text-sm text-amber-900 space-y-1">
                                         <li>Kh√¥ng c√≥ c·∫•u tr√∫c tinh th·ªÉ.</li>
                                         <li>Kh√¥ng c√≥ nhi·ªát ƒë·ªô n√≥ng ch·∫£y x√°c ƒë·ªãnh (m·ªÅm d·∫ßn r·ªìi m·ªõi ch·∫£y).</li>
                                         <li><strong>V√≠ d·ª•:</strong> Th·ªßy tinh, nh·ª±a ƒë∆∞·ªùng, k·∫πo s√¥-c√¥-la.</li>
                                     </ul>
                                 </div>
                             </div>
                        </div>

                        <div class="mt-8">
                           <h3 class="text-xl font-bold text-gray-800 mb-2">Xem m√¥ ph·ªèng n√≥ng ch·∫£y n√®!</h3>
                           <svg id="simulation-melting" class="w-full h-64 bg-gray-100 rounded-lg border"></svg>
                       </div>
                    </div>
                     <div class="bg-gradient-to-br from-red-50 to-yellow-100 p-6 rounded-2xl shadow-lg">
                         <h2 class="text-2xl font-bold text-gray-800 mb-4">G√≥c T∆∞∆°ng T√°c C√πng Th·∫ßy L√¢m</h2>
                         <div class="space-y-6">
                              <div>
                                 <button id="ask-example-2" class="w-full bg-gradient-to-r from-red-500 to-orange-500 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:shadow-xl transition-all duration-300">
                                     Nh·ªù th·∫ßy cho th√™m v√≠ d·ª•
                                 </button>
                             </div>
                             <div>
                                 <p class="font-semibold text-gray-700 mb-2">C√≥ g√¨ kh√≥ hi·ªÉu, h·ªèi th·∫ßy ngay!</p>
                                 <textarea id="user-question-2" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-orange-500 focus:ring-0 transition" rows="3" placeholder="V√≠ d·ª•: Th∆∞a th·∫ßy, t·∫°i sao s√¥-c√¥-la l·∫°i m·ªÅm ra tr∆∞·ªõc khi ch·∫£y ·∫°?"></textarea>
                                 <button id="send-question-2" class="mt-2 w-full bg-gradient-to-r from-amber-500 to-lime-500 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:shadow-xl transition-all duration-300">
                                     G·ª≠i c√¢u h·ªèi
                                 </button>
                             </div>
                             <div id="ai-response-2" class="bg-white/80 p-4 rounded-lg min-h-[100px] shadow-inner">
                                 <div class="flex items-center justify-center h-full">
                                    <p class="text-gray-500">C√¢u tr·∫£ l·ªùi c·ªßa th·∫ßy s·∫Ω hi·ªán ·ªü ƒë√¢y...</p>
                                 </div>
                             </div>
                         </div>
                     </div>
                 </div>
            </div>

            <!-- Tab 3: S·ª± H√≥a h∆°i & Ng∆∞ng t·ª• -->
            <div id="tab-content-3" class="tab-content">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="bg-white p-6 rounded-2xl shadow-lg">
                        <h2 class="text-2xl font-bold text-gray-800 mb-4">Th·∫ßy gi·∫£ng b√†i: H√≥a h∆°i & Ng∆∞ng t·ª•</h2>
                        <div class="text-gray-700 space-y-3 leading-relaxed">
                             <p><strong>S·ª± bay h∆°i</strong> gi·ªëng nh∆∞ m·ªôt v√†i b·∫°n "nƒÉng ƒë·ªông" nh·∫•t ·ªü g·∫ßn m·∫∑t n∆∞·ªõc (g·∫ßn c·ªïng tr∆∞·ªùng) c√≥ ƒë·ªß nƒÉng l∆∞·ª£ng ƒë·ªÉ "nh·∫£y" ra kh·ªèi ƒë√°m ƒë√¥ng v√† bi·∫øn th√†nh h∆°i. N√≥ x·∫£y ra ·ªü m·ªçi nhi·ªát ƒë·ªô, v√† c√†ng n√≥ng th√¨ c√†ng nhi·ªÅu b·∫°n "nh·∫£y" ra h∆°n.</p>
                             <p><strong>S·ª± s√¥i</strong> th√¨ "ho√†nh tr√°ng" h∆°n nhi·ªÅu! N√≥ gi·ªëng nh∆∞ c·∫£ l·ªõp c√πng "b√πng n·ªï" khi ƒë∆∞·ª£c ƒëun t·ªõi 100¬∞C (v·ªõi n∆∞·ªõc). T·∫•t c·∫£ c√°c b·∫°n, c·∫£ ·ªü tr√™n m·∫∑t v√† s√¢u trong l√≤ng ch·∫•t l·ªèng, ƒë·ªÅu c√≥ ƒë·ªß nƒÉng l∆∞·ª£ng ƒë·ªÉ "v∆∞·ª£t r√†o" bi·∫øn th√†nh h∆°i.</p>
                             <p>C√≤n <strong>s·ª± ng∆∞ng t·ª•</strong>? √Ä, l√† khi m·∫•y b·∫°n h∆°i n∆∞·ªõc bay l√™n cao, g·∫∑p l·∫°nh, l·∫°i "t·ª• t·∫≠p" l·∫°i v·ªõi nhau th√†nh nh·ªØng gi·ªçt n∆∞·ªõc nh·ªè. Gi·ªëng nh∆∞ s∆∞∆°ng ƒë·ªçng tr√™n l√° v√†o bu·ªïi s√°ng ƒë√≥!</p>
                        </div>
                        <div class="mt-6">
                           <h3 class="text-xl font-bold text-gray-800 mb-2">Xem m√¥ ph·ªèng h√≥a h∆°i n√®!</h3>
                           <svg id="simulation-boiling" class="w-full h-64 bg-gray-100 rounded-lg border"></svg>
                       </div>
                    </div>
                     <div class="bg-gradient-to-br from-teal-50 to-cyan-100 p-6 rounded-2xl shadow-lg">
                         <h2 class="text-2xl font-bold text-gray-800 mb-4">G√≥c T∆∞∆°ng T√°c C√πng Th·∫ßy L√¢m</h2>
                         <div class="space-y-6">
                              <div>
                                 <button id="ask-example-3" class="w-full bg-gradient-to-r from-teal-500 to-cyan-500 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:shadow-xl transition-all duration-300">
                                     Nh·ªù th·∫ßy cho th√™m v√≠ d·ª•
                                 </button>
                             </div>
                             <div>
                                 <p class="font-semibold text-gray-700 mb-2">C√≥ g√¨ kh√≥ hi·ªÉu, h·ªèi th·∫ßy ngay!</p>
                                 <textarea id="user-question-3" class="w-full p-3 rounded-lg border-2 border-gray-300 focus:border-cyan-500 focus:ring-0 transition" rows="3" placeholder="V√≠ d·ª•: T·∫°i sao ph∆°i qu·∫ßn √°o ch·ªó c√≥ gi√≥ l·∫°i nhanh kh√¥ h∆°n ·∫°?"></textarea>
                                 <button id="send-question-3" class="mt-2 w-full bg-gradient-to-r from-sky-400 to-fuchsia-500 text-white font-bold py-3 px-4 rounded-lg shadow-md hover:shadow-xl transition-all duration-300">
                                     G·ª≠i c√¢u h·ªèi
                                 </button>
                             </div>
                             <div id="ai-response-3" class="bg-white/80 p-4 rounded-lg min-h-[100px] shadow-inner">
                                <div class="flex items-center justify-center h-full">
                                    <p class="text-gray-500">C√¢u tr·∫£ l·ªùi c·ªßa th·∫ßy s·∫Ω hi·ªán ·ªü ƒë√¢y...</p>
                                 </div>
                             </div>
                         </div>
                     </div>
                </div>
            </div>
        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- LOGIC CHUY·ªÇN TAB ---
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabContents = document.querySelectorAll('.tab-content');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const tabId = button.dataset.tab;

                    // B·ªè active ·ªü t·∫•t c·∫£ button v√† content
                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    tabContents.forEach(content => content.classList.remove('active'));

                    // Th√™m active cho button v√† content ƒë∆∞·ª£c ch·ªçn
                    button.classList.add('active');
                    document.getElementById(`tab-content-${tabId}`).classList.add('active');
                    
                    // Kh·ªüi ch·∫°y l·∫°i animation cho tab ƒë∆∞·ª£c ch·ªçn
                    if(tabId === '1') initStatesSimulation();
                    if(tabId === '2') initMeltingSimulation();
                    if(tabId === '3') initBoilingSimulation();
                });
            });

            // --- LOGIC M√î PH·ªéNG SVG ---
            let currentAnimationId = null;
            
            // M√¥ ph·ªèng 1: C√°c th·ªÉ c·ªßa ch·∫•t
            const svgStates = document.getElementById('simulation-states');
            let currentState = 'solid'; // Tr·∫°ng th√°i m·∫∑c ƒë·ªãnh
            let particlesStates = [];
            
            function createParticles(svg, count, state) {
                if (!svg) return [];
                const width = svg.clientWidth;
                const height = svg.clientHeight;
                const newParticles = [];
                svg.innerHTML = '';
                for (let i = 0; i < count; i++) {
                    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                    let particle = {
                        el: circle,
                        x: Math.random() * width,
                        y: Math.random() * height,
                        vx: Math.random() * 2 - 1,
                        vy: Math.random() * 2 - 1,
                        r: 6,
                        ox: 0, // original x for solid state
                        oy: 0  // original y for solid state
                    };
                    
                    if (state === 'solid') {
                        const gridX = 8;
                        const gridY = 4;
                        particle.x = (width / (gridX + 1)) * (i % gridX + 1);
                        particle.y = (height / (gridY + 1)) * (Math.floor(i / gridX) + 1);
                        particle.ox = particle.x;
                        particle.oy = particle.y;
                        circle.setAttribute('fill', '#4facfe');
                    } else if (state === 'liquid') {
                         particle.y = height * 0.5 + Math.random() * height * 0.5;
                         circle.setAttribute('fill', '#2dd4bf');
                    } else { // gas
                         circle.setAttribute('fill', '#f59e0b');
                    }
                    
                    circle.setAttribute('cx', particle.x);
                    circle.setAttribute('cy', particle.y);
                    circle.setAttribute('r', particle.r);
                    svg.appendChild(circle);
                    newParticles.push(particle);
                }
                return newParticles;
            }

            function animateStates() {
                if (!svgStates) return;
                const width = svgStates.clientWidth;
                const height = svgStates.clientHeight;

                particlesStates.forEach(p => {
                    if (currentState === 'solid') {
                        p.x = p.ox + Math.random() * 2 - 1;
                        p.y = p.oy + Math.random() * 2 - 1;
                    } else if (currentState === 'liquid') {
                        p.x += p.vx * 0.5;
                        p.y += p.vy * 0.5;
                        
                        if (p.x < p.r || p.x > width - p.r) p.vx *= -1;
                        // Gi·ªØ ch·∫•t l·ªèng ·ªü n·ª≠a d∆∞·ªõi
                        if (p.y < height * 0.5 || p.y > height - p.r) p.vy *= -1;

                    } else { // gas
                        p.x += p.vx * 2;
                        p.y += p.vy * 2;

                        if (p.x < p.r || p.x > width - p.r) p.vx *= -1;
                        if (p.y < p.r || p.y > height - p.r) p.vy *= -1;
                    }
                    
                    p.el.setAttribute('cx', p.x);
                    p.el.setAttribute('cy', p.y);
                });
                
                currentAnimationId = requestAnimationFrame(animateStates);
            }

            window.setSimulationState = (state) => {
                currentState = state;
                const count = state === 'gas' ? 20 : 32;
                particlesStates = createParticles(svgStates, count, state);
            };
            
            function initStatesSimulation(){
                 if(currentAnimationId) cancelAnimationFrame(currentAnimationId);
                 setSimulationState('solid');
                 animateStates();
            }

            // M√¥ ph·ªèng 2: N√≥ng ch·∫£y
            const svgMelting = document.getElementById('simulation-melting');
            let particlesMelting = [];
            let temperature = 0; // 0 to 100

            function initMeltingSimulation() {
                if(currentAnimationId) cancelAnimationFrame(currentAnimationId);
                 if (!svgMelting) return;
                const width = svgMelting.clientWidth;
                const height = svgMelting.clientHeight;
                svgMelting.innerHTML = '';
                particlesMelting = [];
                temperature = 0;

                const gridX = 10;
                const gridY = 5;
                for (let i = 0; i < 50; i++) {
                     const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                     let p = {
                         el: circle,
                         x: (width / (gridX + 1)) * (i % gridX + 1),
                         y: height - (height / (gridY + 1)) * (Math.floor(i / gridX) + 1),
                         ox: 0, oy: 0, vx: 0, vy: 0,
                         r: 5
                     };
                     p.ox = p.x;
                     p.oy = p.y;
                     p.vx = Math.random() * 2 - 1;
                     p.vy = Math.random() * 2 - 1;
                     circle.setAttribute('cx', p.x);
                     circle.setAttribute('cy', p.y);
                     circle.setAttribute('r', p.r);
                     circle.setAttribute('fill', '#ef4444');
                     svgMelting.appendChild(circle);
                     particlesMelting.push(p);
                }

                animateMelting();
            }

            function animateMelting() {
                temperature = (temperature + 0.1) % 100;
                const meltThreshold = 50;
                const liquidMovement = (temperature - meltThreshold) / (100 - meltThreshold);
                 if (!svgMelting) return;
                const width = svgMelting.clientWidth;
                const height = svgMelting.clientHeight;

                particlesMelting.forEach(p => {
                    if (temperature < meltThreshold) { // Solid state
                        const jitter = temperature / meltThreshold;
                        p.x = p.ox + (Math.random() * 2 - 1) * jitter * 5;
                        p.y = p.oy + (Math.random() * 2 - 1) * jitter * 5;
                        p.el.setAttribute('fill', `rgb(${239 + (100-239)*(jitter)}, ${68 + (107-68)*(jitter)}, ${68 + (119-68)*(jitter)})`); // red to orange
                    } else { // Liquid state
                        p.x += p.vx * liquidMovement;
                        p.y += p.vy * liquidMovement;
                        if (p.x < p.r || p.x > width - p.r) p.vx *= -1;
                        if (p.y < height * (1 - liquidMovement) || p.y > height - p.r) p.vy *= -1;
                         p.el.setAttribute('fill', '#f97316');
                    }
                     p.el.setAttribute('cx', p.x);
                     p.el.setAttribute('cy', p.y);
                });

                currentAnimationId = requestAnimationFrame(animateMelting);
            }
            
            // M√¥ ph·ªèng 3: H√≥a h∆°i
             const svgBoiling = document.getElementById('simulation-boiling');
             let particlesBoiling = [];
             
             function initBoilingSimulation(){
                 if(currentAnimationId) cancelAnimationFrame(currentAnimationId);
                  if (!svgBoiling) return;
                 const width = svgBoiling.clientWidth;
                 const height = svgBoiling.clientHeight;
                 svgBoiling.innerHTML = '';
                 particlesBoiling = [];
                 
                 for(let i=0; i<60; i++){
                     const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                     let p = {
                         el: circle,
                         r: 4,
                         x: Math.random() * width,
                         y: height/2 + Math.random() * height/2,
                         vx: Math.random() * 1 - 0.5,
                         vy: -(Math.random() * 2)
                     };
                     circle.setAttribute('cx', p.x);
                     circle.setAttribute('cy', p.y);
                     circle.setAttribute('r', p.r);
                     circle.setAttribute('fill', '#06b6d4');
                     svgBoiling.appendChild(circle);
                     particlesBoiling.push(p);
                 }
                 animateBoiling();
             }
             
             function animateBoiling(){
                 if (!svgBoiling) return;
                 const width = svgBoiling.clientWidth;
                 const height = svgBoiling.clientHeight;
                 
                 particlesBoiling.forEach(p => {
                    p.y += p.vy * 0.5;
                    p.x += p.vx * 0.5;

                    // Bay h∆°i khi l√™n ƒë·∫øn ƒë·ªânh
                    if (p.y < p.r) {
                        p.y = height/2 + Math.random() * height/2; // Reset xu·ªëng d∆∞·ªõi
                        p.x = Math.random() * width;
                    }
                    if (p.x < p.r || p.x > width - p.r) p.vx *= -1;

                     p.el.setAttribute('cx', p.x);
                     p.el.setAttribute('cy', p.y);
                 });
                 
                 currentAnimationId = requestAnimationFrame(animateBoiling);
             }


            // Kh·ªüi ch·∫°y m√¥ ph·ªèng cho tab ƒë·∫ßu ti√™n
            initStatesSimulation();

            // --- LOGIC G·ªåI GEMINI API ---
            const apiKey = "AIzaSyCtpvVNCZzRr59N-mISm5MVzJ5pVuj9Qxk"; // API Key ƒë∆∞·ª£c cung c·∫•p b·ªüi m√¥i tr∆∞·ªùng Canvas

            async function callGemini(prompt, responseElement) {
                // Hi·ªÉn th·ªã loading
                responseElement.innerHTML = `
                    <div class="flex items-center justify-center h-full">
                        <div class="loader"></div>
                        <p class="ml-3 text-gray-500">Th·∫ßy ƒëang suy nghƒ© c√¢u tr·∫£ l·ªùi...</p>
                    </div>`;

                const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;
                
                const payload = {
                    contents: [{
                        role: "user",
                        parts: [{ text: prompt }]
                    }]
                };

                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    
                    if (!response.ok) {
                        throw new Error(`API error: ${response.status}`);
                    }

                    const result = await response.json();
                    
                    if (result.candidates && result.candidates.length > 0 && result.candidates[0].content.parts[0].text) {
                        const text = result.candidates[0].content.parts[0].text;
                        // D√πng regex ƒë·ªÉ thay th·∫ø markdown ƒë∆°n gi·∫£n th√†nh HTML cho ƒë·∫πp
                        let formattedText = text
                            .replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>') // Bold
                            .replace(/\*(.*?)\*/g, '<em>$1</em>')       // Italic
                            .replace(/`([^`]+)`/g, '<code class="bg-gray-200 text-sm rounded px-1 py-0.5">$1</code>') // Inline code
                            .replace(/\n/g, '<br>'); // New lines
                        
                        responseElement.innerHTML = `<div class="text-gray-800 leading-relaxed">${formattedText}</div>`;
                    } else {
                         throw new Error("Kh√¥ng nh·∫≠n ƒë∆∞·ª£c c√¢u tr·∫£ l·ªùi h·ª£p l·ªá t·ª´ API.");
                    }

                } catch (error) {
                    console.error('L·ªói khi g·ªçi Gemini API:', error);
                    responseElement.innerHTML = `<p class="text-red-500">·ªêi, c√≥ l·ªói r·ªìi! Th·∫ßy kh√¥ng k·∫øt n·ªëi ƒë∆∞·ª£c v·ªõi "s·ª©c m·∫°nh tri th·ª©c". Em th·ª≠ l·∫°i sau nh√©!</p>`;
                }
            }

            // G·∫Øn s·ª± ki·ªán cho c√°c n√∫t t∆∞∆°ng t√°c
            const personaPrompt = "B·∫°n l√† Th·∫ßy L√¢m, m·ªôt gi√°o vi√™n V·∫≠t l√Ω vui t√≠nh, g·∫ßn g≈©i v√† c√≥ kh·∫£ nƒÉng gi·∫£i th√≠ch c√°c kh√°i ni·ªám ph·ª©c t·∫°p m·ªôt c√°ch ƒë∆°n gi·∫£n, d·ªÖ hi·ªÉu cho h·ªçc sinh c·∫•p 2, c·∫•p 3. H√£y lu√¥n d√πng vƒÉn phong n√†y ƒë·ªÉ tr·∫£ l·ªùi.";

            // Tab 1
            document.getElementById('ask-example-1').addEventListener('click', () => {
                const prompt = `${personaPrompt} H√£y cho th·∫ßy th√™m m·ªôt v√†i v√≠ d·ª• th·∫≠t g·∫ßn g≈©i v√† th√∫ v·ªã v·ªÅ s·ª± kh√°c nhau gi·ªØa ba th·ªÉ r·∫Øn, l·ªèng, kh√≠ trong ƒë·ªùi s·ªëng h√†ng ng√†y.`;
                callGemini(prompt, document.getElementById('ai-response-1'));
            });
            document.getElementById('send-question-1').addEventListener('click', () => {
                const question = document.getElementById('user-question-1').value;
                if (!question) return;
                const prompt = `${personaPrompt} M·ªôt h·ªçc sinh c√≥ th·∫Øc m·∫Øc sau: "${question}". H√£y tr·∫£ l·ªùi c√¢u h·ªèi n√†y.`;
                callGemini(prompt, document.getElementById('ai-response-1'));
            });

            // Tab 2
            document.getElementById('ask-example-2').addEventListener('click', () => {
                const prompt = `${personaPrompt} H√£y cho th·∫ßy th√™m v√≠ d·ª• v·ªÅ s·ª± kh√°c bi·ªát gi·ªØa ch·∫•t r·∫Øn k·∫øt tinh v√† ch·∫•t r·∫Øn v√¥ ƒë·ªãnh h√¨nh.`;
                callGemini(prompt, document.getElementById('ai-response-2'));
            });
            document.getElementById('send-question-2').addEventListener('click', () => {
                const question = document.getElementById('user-question-2').value;
                if (!question) return;
                const prompt = `${personaPrompt} M·ªôt h·ªçc sinh c√≥ th·∫Øc m·∫Øc sau: "${question}". H√£y tr·∫£ l·ªùi c√¢u h·ªèi n√†y.`;
                callGemini(prompt, document.getElementById('ai-response-2'));
            });

            // Tab 3
            document.getElementById('ask-example-3').addEventListener('click', () => {
                const prompt = `${personaPrompt} H√£y gi·∫£i th√≠ch r√µ h∆°n v√† cho th√™m v√≠ d·ª• v·ªÅ s·ª± bay h∆°i, s·ª± s√¥i v√† s·ª± ng∆∞ng t·ª•. L√†m sao ƒë·ªÉ ph√¢n bi·ªát ch√∫ng m·ªôt c√°ch d·ªÖ d√†ng nh·∫•t?`;
                callGemini(prompt, document.getElementById('ai-response-3'));
            });
            document.getElementById('send-question-3').addEventListener('click', () => {
                const question = document.getElementById('user-question-3').value;
                if (!question) return;
                const prompt = `${personaPrompt} M·ªôt h·ªçc sinh c√≥ th·∫Øc m·∫Øc sau: "${question}". H√£y tr·∫£ l·ªùi c√¢u h·ªèi n√†y.`;
                callGemini(prompt, document.getElementById('ai-response-3'));
            });
        });
    </script>

</body>
</html>
